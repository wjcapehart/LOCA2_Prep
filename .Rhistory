inventory = inventory %>% filter(Var != "DTR")
inv_stat = inventory %>%
group_by(Model, Member, Var, Season) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Stat = "Both",
Rank = rank(value))  %>%
arrange(value) %>%
ungroup()
inv_season = inventory %>%
group_by(Model, Member, Var, Stat) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Season = "Annual",
Rank   = rank(value))   %>%
arrange(value) %>%
ungroup()
inv_var = inventory %>%
group_by(Model, Member, Season, Stat) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Var = "All",
Rank   = rank(value))   %>%
arrange(value) %>%
ungroup()
inv_var_season = inventory %>%
group_by(Model, Member, Stat) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Var    = "All",
Season = "Annual",
Rank   = rank(value))  %>%
arrange(value) %>%
ungroup()
inv_season_stat = inventory %>%
group_by(Model, Member, Var) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Season = "Annual",
Stat   = "Both",
Rank   = rank(value))   %>%
arrange(value) %>%
ungroup()
inv_var_stat = inventory %>%
group_by(Model, Member, Season) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Var     = "All",
Stat    = "Both",
Rank    = rank(value))  %>%
ungroup()
inv_var_season_stat = inventory %>%
group_by(Model,Member) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Var    = "All",
Season = "Annual",
Stat   = "Both",
Rank   = rank(value))   %>%
arrange(value) %>%
ungroup()
inventory_1_errors = inv_var_season_stat %>%
group_by(Model) %>%
filter(Rank == 1 )  %>%
arrange(value) %>%
ungroup()
inventory_2_errors = inv_var_season_stat %>%
group_by(Model) %>%
filter(Rank == 2 ) %>%
arrange(value) %>%
ungroup()
inventory_3_errors = inv_var_season_stat %>%
group_by(Model) %>%
filter(Rank == 3 )  %>%
arrange(value) %>%
ungroup()
View(inventory_1_errors)
View(inventory_1_errors)
View(inventory_2_errors)
View(inventory_2_errors)
View(inventory_3_errors)
View(inventory_3_errors)
inventory_1_errors = inv_var_season_stat %>%
group_by(Model) %>%
filter(Rank == 1 )  %>%
arrange(value) %>%
ungroup()
inventory_2_errors = inv_var_season_stat %>%
group_by(Model) %>%
filter(Rank == 2 ) %>%
arrange(value) %>%
ungroup()
inventory_3_errors = inv_var_season_stat %>%
group_by(Model) %>%
filter(Rank == 3 )  %>%
arrange(value) %>%
ungroup()
View(inventory)
View(inventory)
library(package = "tidyverse")
library(package = "readxl")
xlfile = "./LOCA2_Inventory_Validation.xlsx"
pr_sheet = read_excel(path = xlfile, sheet="pr")
tx_sheet = read_excel(path = xlfile, sheet="tasmax")
tn_sheet = read_excel(path = xlfile, sheet="tasmin")
dt_sheet = read_excel(path = xlfile, sheet="DTR")
remove(xlfile)
inventory = rbind(pr_sheet,  tx_sheet)
inventory = rbind(inventory, tn_sheet)
inventory = rbind(inventory, dt_sheet)
remove(pr_sheet,tx_sheet,tn_sheet,dt_sheet)
inventory = pivot_longer(data          = inventory,
cols          = "DJF-RMSE":"SON-BIAS",
names_to      = c("Season", "Stat"),
names_pattern = "(.*)-(.*)",
values_to     = "value")
inventory = inventory %>%
filter(Member!="ENSAVG") %>%
select("Model", "Member", "Var", "Season", "Stat", "value")
inventory$Stat    = factor(x      = inventory$Stat,
levels = c("BIAS","RMSE","Both"))
inventory$Season = factor(x      = inventory$Season,
levels = c("DJF","MAM","JJA","SON","Annual"))
inventory$Var    = factor(x      = inventory$Var,
levels = c("pr","tasmax","tasmin","DTR", "All"))
inventory$Model  = factor(x = inventory$Model)
inventory$Member = factor(x = inventory$Member)
colnames(inventory)
inventory$Rank = NA
inventory = inventory %>% filter(Var != "DTR")
inv_stat = inventory %>%
group_by(Model, Member, Var, Season) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Stat = "Both",
Rank = rank(value))  %>%
arrange(value) %>%
ungroup()
inv_season = inventory %>%
group_by(Model, Member, Var, Stat) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Season = "Annual",
Rank   = rank(value))   %>%
arrange(value) %>%
ungroup()
inv_var = inventory %>%
group_by(Model, Member, Season, Stat) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Var = "All",
Rank   = rank(value))   %>%
arrange(value) %>%
ungroup()
inv_var_season = inventory %>%
group_by(Model, Member, Stat) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Var    = "All",
Season = "Annual",
Rank   = rank(value))  %>%
arrange(value) %>%
ungroup()
inv_season_stat = inventory %>%
group_by(Model, Member, Var) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Season = "Annual",
Stat   = "Both",
Rank   = rank(value))   %>%
arrange(value) %>%
ungroup()
inv_var_stat = inventory %>%
group_by(Model, Member, Season) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Var     = "All",
Stat    = "Both",
Rank    = rank(value))  %>%
ungroup()
inv_var_season_stat = inventory %>%
group_by(Model,Member) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Var    = "All",
Season = "Annual",
Stat   = "Both",
Rank   = rank(value))   %>%
arrange(value) %>%
ungroup()
library(package = "tidyverse")
library(package = "readxl")
xlfile = "./LOCA2_Inventory_Validation.xlsx"
pr_sheet = read_excel(path = xlfile, sheet="pr")
tx_sheet = read_excel(path = xlfile, sheet="tasmax")
tn_sheet = read_excel(path = xlfile, sheet="tasmin")
dt_sheet = read_excel(path = xlfile, sheet="DTR")
remove(xlfile)
inventory = rbind(pr_sheet,  tx_sheet)
inventory = rbind(inventory, tn_sheet)
inventory = rbind(inventory, dt_sheet)
remove(pr_sheet,tx_sheet,tn_sheet,dt_sheet)
inventory = pivot_longer(data          = inventory,
cols          = "DJF-RMSE":"SON-BIAS",
names_to      = c("Season", "Stat"),
names_pattern = "(.*)-(.*)",
values_to     = "value")
inventory = inventory %>%
filter(Member!="ENSAVG") %>%
select("Model", "Member", "Var", "Season", "Stat", "value")
inventory$Stat    = factor(x      = inventory$Stat,
levels = c("BIAS","RMSE","Both"))
inventory$Season = factor(x      = inventory$Season,
levels = c("DJF","MAM","JJA","SON","Annual"))
inventory$Var    = factor(x      = inventory$Var,
levels = c("pr","tasmax","tasmin","DTR", "All"))
inventory$Model  = factor(x = inventory$Model)
inventory$Member = factor(x = inventory$Member)
colnames(inventory)
inventory$Rank = NA
inventory = inventory %>% filter(Var != "DTR")
inv_stat = inventory %>%
group_by(Model, Member, Var, Season) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Stat = "Both",
Rank = rank(value))  %>%
arrange(value) %>%
ungroup()
inv_season = inventory %>%
group_by(Model, Member, Var, Stat) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Season = "Annual",
Rank   = rank(value))   %>%
arrange(value) %>%
ungroup()
inv_var = inventory %>%
group_by(Model, Member, Season, Stat) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Var = "All",
Rank   = rank(value))   %>%
arrange(value) %>%
ungroup()
inv_var_season = inventory %>%
group_by(Model, Member, Stat) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Var    = "All",
Season = "Annual",
Rank   = rank(value))  %>%
arrange(value) %>%
ungroup()
inv_season_stat = inventory %>%
group_by(Model, Member, Var) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Season = "Annual",
Stat   = "Both",
Rank   = rank(value))   %>%
arrange(value) %>%
ungroup()
inv_var_stat = inventory %>%
group_by(Model, Member, Season) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Var     = "All",
Stat    = "Both",
Rank    = rank(value))  %>%
ungroup()
inv_var_season_stat = inventory %>%
group_by(Model,Member) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Var    = "All",
Season = "Annual",
Stat   = "Both",
Rank   = rank(value))   %>%
arrange(value) %>%
ungroup()
inventory_1_errors = inv_var_season_stat %>%
group_by(Model) %>%
filter(Rank == 1 )  %>%
arrange(value) %>%
ungroup()
inventory_2_errors = inv_var_season_stat %>%
group_by(Model) %>%
filter(Rank == 2 ) %>%
arrange(value) %>%
ungroup()
inventory_3_errors = inv_var_season_stat %>%
group_by(Model) %>%
filter(Rank == 3 )  %>%
arrange(value) %>%
ungroup()
View(inventory_3_errors)
View(inventory_3_errors)
View(inventory_2_errors)
View(inventory_2_errors)
View(inventory_1_errors)
View(inventory_1_errors)
library(package = "tidyverse")
library(package = "readxl")
xlfile = "./LOCA2_Inventory_Validation.xlsx"
pr_sheet = read_excel(path = xlfile, sheet="pr")
tx_sheet = read_excel(path = xlfile, sheet="tasmax")
tn_sheet = read_excel(path = xlfile, sheet="tasmin")
dt_sheet = read_excel(path = xlfile, sheet="DTR")
remove(xlfile)
inventory = rbind(pr_sheet,  tx_sheet)
inventory = rbind(inventory, tn_sheet)
inventory = rbind(inventory, dt_sheet)
remove(pr_sheet,tx_sheet,tn_sheet,dt_sheet)
inventory = pivot_longer(data          = inventory,
cols          = "DJF-RMSE":"SON-BIAS",
names_to      = c("Season", "Stat"),
names_pattern = "(.*)-(.*)",
values_to     = "value")
inventory = inventory %>%
filter(Member!="ENSAVG") %>%
select("Model", "Member", "Var", "Season", "Stat", "value")
inventory$Stat    = factor(x      = inventory$Stat,
levels = c("BIAS","RMSE","Both"))
inventory$Season = factor(x      = inventory$Season,
levels = c("DJF","MAM","JJA","SON","Annual"))
inventory$Var    = factor(x      = inventory$Var,
levels = c("pr","tasmax","tasmin","DTR", "All"))
inventory$Model  = factor(x = inventory$Model)
inventory$Member = factor(x = inventory$Member)
colnames(inventory)
inventory$Rank = NA
inventory = inventory %>% filter(Var != "DTR")
inv_stat = inventory %>%
group_by(Model, Member, Var, Season) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Stat = "Both",
Rank = rank(value))  %>%
arrange(value) %>%
ungroup()
inv_season = inventory %>%
group_by(Model, Member, Var, Stat) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Season = "Annual",
Rank   = rank(value))   %>%
arrange(value) %>%
ungroup()
inv_var = inventory %>%
group_by(Model, Member, Season, Stat) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Var = "All",
Rank   = rank(value))   %>%
arrange(value) %>%
ungroup()
inv_var_season = inventory %>%
group_by(Model, Member, Stat) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Var    = "All",
Season = "Annual",
Rank   = rank(value))  %>%
arrange(value) %>%
ungroup()
inv_season_stat = inventory %>%
group_by(Model, Member, Var) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Season = "Annual",
Stat   = "Both",
Rank   = rank(value))   %>%
arrange(value) %>%
ungroup()
inv_var_stat = inventory %>%
group_by(Model, Member, Season) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Var     = "All",
Stat    = "Both",
Rank    = rank(value))  %>%
ungroup()
inv_var_season_stat = inventory %>%
group_by(Model,Member) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Var    = "All",
Season = "Annual",
Stat   = "Both",
Rank   = rank(value))   %>%
arrange(value) %>%
ungroup()
inventory_1_errors = inv_var_season_stat %>%
group_by(Model) %>%
filter(Rank == 1 )  %>%
arrange(value) %>%
ungroup()
inventory_2_errors = inv_var_season_stat %>%
group_by(Model) %>%
filter(Rank == 2 ) %>%
arrange(value) %>%
ungroup()
inventory_3_errors = inv_var_season_stat %>%
group_by(Model) %>%
filter(Rank == 3 )  %>%
arrange(value) %>%
ungroup()
inventory = rbind(inventory, inv_season)
inventory = rbind(inventory, inv_stat)
inventory = rbind(inventory, inv_var)
inventory = rbind(inventory, inv_season_stat)
inventory = rbind(inventory, inv_var_season)
inventory = rbind(inventory, inv_var_stat)
inventory = rbind(inventory, inv_var_season_stat)
inventory$Stat    = factor(x     = inventory$Stat,
levels = c("BIAS", "RMSE", "Both"))
inventory$Season = factor(x      = inventory$Season,
levels = c("DJF", "MAM", "JJA", "SON", "Annual"))
inventory$Var    = factor(x      = inventory$Var,
levels = c("pr", "tasmax", "tasmin", "DTR", "All"))
inventory = inventory %>% arange(values)
library(package = "tidyverse")
library(package = "readxl")
xlfile = "./LOCA2_Inventory_Validation.xlsx"
pr_sheet = read_excel(path = xlfile, sheet="pr")
tx_sheet = read_excel(path = xlfile, sheet="tasmax")
tn_sheet = read_excel(path = xlfile, sheet="tasmin")
dt_sheet = read_excel(path = xlfile, sheet="DTR")
remove(xlfile)
inventory = rbind(pr_sheet,  tx_sheet)
inventory = rbind(inventory, tn_sheet)
inventory = rbind(inventory, dt_sheet)
remove(pr_sheet,tx_sheet,tn_sheet,dt_sheet)
inventory = pivot_longer(data          = inventory,
cols          = "DJF-RMSE":"SON-BIAS",
names_to      = c("Season", "Stat"),
names_pattern = "(.*)-(.*)",
values_to     = "value")
inventory = inventory %>%
filter(Member!="ENSAVG") %>%
select("Model", "Member", "Var", "Season", "Stat", "value")
inventory$Stat    = factor(x      = inventory$Stat,
levels = c("BIAS","RMSE","Both"))
inventory$Season = factor(x      = inventory$Season,
levels = c("DJF","MAM","JJA","SON","Annual"))
inventory$Var    = factor(x      = inventory$Var,
levels = c("pr","tasmax","tasmin","DTR", "All"))
inventory$Model  = factor(x = inventory$Model)
inventory$Member = factor(x = inventory$Member)
colnames(inventory)
inventory$Rank = NA
inventory = inventory %>% filter(Var != "DTR")
inv_stat = inventory %>%
group_by(Model, Member, Var, Season) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Stat = "Both",
Rank = rank(value))  %>%
arrange(value) %>%
ungroup()
inv_season = inventory %>%
group_by(Model, Member, Var, Stat) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Season = "Annual",
Rank   = rank(value))   %>%
arrange(value) %>%
ungroup()
inv_var = inventory %>%
group_by(Model, Member, Season, Stat) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Var = "All",
Rank   = rank(value))   %>%
arrange(value) %>%
ungroup()
inv_var_season = inventory %>%
group_by(Model, Member, Stat) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Var    = "All",
Season = "Annual",
Rank   = rank(value))  %>%
arrange(value) %>%
ungroup()
inv_season_stat = inventory %>%
group_by(Model, Member, Var) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Season = "Annual",
Stat   = "Both",
Rank   = rank(value))   %>%
arrange(value) %>%
ungroup()
inv_var_stat = inventory %>%
group_by(Model, Member, Season) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Var     = "All",
Stat    = "Both",
Rank    = rank(value))  %>%
ungroup()
inv_var_season_stat = inventory %>%
group_by(Model,Member) %>%
summarize(value = sqrt(sum(value^2))) %>%
mutate(Var    = "All",
Season = "Annual",
Stat   = "Both",
Rank   = rank(value))   %>%
arrange(value) %>%
ungroup()
inventory_1_errors = inv_var_season_stat %>%
group_by(Model) %>%
filter(Rank == 1 )  %>%
arrange(value) %>%
ungroup()
inventory_2_errors = inv_var_season_stat %>%
group_by(Model) %>%
filter(Rank == 2 ) %>%
arrange(value) %>%
ungroup()
inventory_3_errors = inv_var_season_stat %>%
group_by(Model) %>%
filter(Rank == 3 )  %>%
arrange(value) %>%
ungroup()
inventory = rbind(inventory, inv_season)
inventory = rbind(inventory, inv_stat)
inventory = rbind(inventory, inv_var)
inventory = rbind(inventory, inv_season_stat)
inventory = rbind(inventory, inv_var_season)
inventory = rbind(inventory, inv_var_stat)
inventory = rbind(inventory, inv_var_season_stat)
inventory$Stat    = factor(x     = inventory$Stat,
levels = c("BIAS", "RMSE", "Both"))
inventory$Season = factor(x      = inventory$Season,
levels = c("DJF", "MAM", "JJA", "SON", "Annual"))
inventory$Var    = factor(x      = inventory$Var,
levels = c("pr", "tasmax", "tasmin", "DTR", "All"))
inventory = inventory %>% arange(values)
View(inventory_2_errors)
View(inventory_2_errors)
View(inventory_1_errors)
View(inventory_1_errors)
View(inv_var_season)
